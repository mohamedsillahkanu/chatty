<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Social - Connect & Share</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f0f2f5;
        }

        /* Top Navigation */
        .top-nav {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 0.75rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-center {
            display: flex;
            gap: 1rem;
        }

        .nav-btn {
            padding: 0.5rem 1.5rem;
            border: none;
            background: #f0f2f5;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar-nav {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            overflow: hidden;
        }

        .user-avatar-nav img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .notification-badge {
            background: #ef4444;
            color: white;
            border-radius: 50%;
            padding: 0.2rem 0.5rem;
            font-size: 0.75rem;
            font-weight: bold;
        }

        /* Main Layout */
        .main-container {
            max-width: 1400px;
            margin: 2rem auto;
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 2rem;
            padding: 0 2rem;
        }

        /* Left Sidebar */
        .left-sidebar {
            position: sticky;
            top: 80px;
            height: fit-content;
        }

        .profile-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            overflow: hidden;
            cursor: pointer;
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .profile-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e0e0e0;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 1.3rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #666;
        }

        .menu-card {
            background: white;
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .menu-item {
            padding: 0.75rem;
            border-radius: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: background 0.2s;
            margin-bottom: 0.5rem;
        }

        .menu-item:hover {
            background: #f0f2f5;
        }

        .menu-icon {
            font-size: 1.5rem;
        }

        /* Center Feed */
        .center-feed {
            max-width: 600px;
        }

        .create-post-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .post-input {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .post-input textarea {
            flex: 1;
            border: 1px solid #e0e0e0;
            border-radius: 1rem;
            padding: 1rem;
            resize: none;
            font-family: inherit;
            font-size: 1rem;
        }

        .post-actions {
            display: flex;
            gap: 1rem;
        }

        .post-action-btn {
            flex: 1;
            padding: 0.75rem;
            border: none;
            background: #f0f2f5;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: background 0.3s;
        }

        .post-action-btn:hover {
            background: #e4e6eb;
        }

        .post-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .post-header {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .post-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            overflow: hidden;
            flex-shrink: 0;
        }

        .post-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .post-info {
            flex: 1;
        }

        .post-author {
            font-weight: bold;
            margin-bottom: 0.2rem;
        }

        .post-time {
            font-size: 0.85rem;
            color: #666;
        }

        .post-content {
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .post-media {
            margin-bottom: 1rem;
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .post-media img, .post-media video {
            width: 100%;
            display: block;
        }

        .post-stats {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
            color: #666;
        }

        .post-interactions {
            display: flex;
            gap: 0.5rem;
        }

        .interaction-btn {
            flex: 1;
            padding: 0.75rem;
            border: none;
            background: transparent;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: background 0.2s;
        }

        .interaction-btn:hover {
            background: #f0f2f5;
        }

        .interaction-btn.liked {
            color: #667eea;
        }

        .comments-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e0e0e0;
        }

        .comment {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .comment-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            overflow: hidden;
            flex-shrink: 0;
        }

        .comment-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .comment-content {
            flex: 1;
            background: #f0f2f5;
            padding: 0.75rem;
            border-radius: 1rem;
        }

        .comment-author {
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }

        .comment-text {
            font-size: 0.9rem;
        }

        .comment-input {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .comment-input input {
            flex: 1;
            border: 1px solid #e0e0e0;
            border-radius: 1.5rem;
            padding: 0.75rem 1rem;
            font-family: inherit;
        }

        /* Right Sidebar */
        .right-sidebar {
            position: sticky;
            top: 80px;
            height: fit-content;
        }

        .suggestions-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-weight: bold;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .suggestion-item {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            align-items: center;
        }

        .suggestion-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            overflow: hidden;
            flex-shrink: 0;
        }

        .suggestion-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .suggestion-info {
            flex: 1;
        }

        .suggestion-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
        }

        .suggestion-major {
            font-size: 0.8rem;
            color: #666;
        }

        .add-friend-btn {
            padding: 0.5rem 1rem;
            border: none;
            background: #667eea;
            color: white;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.85rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-family: inherit;
        }

        .image-upload-area {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .image-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            background: #f0f0f0;
            overflow: hidden;
            border: 3px solid #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-btn {
            background: #667eea;
            color: white;
            padding: 0.6rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .btn-submit {
            flex: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.9rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-cancel {
            flex: 1;
            background: #e0e0e0;
            color: #666;
            border: none;
            padding: 0.9rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
        }

        .welcome-screen {
            text-align: center;
            padding: 3rem;
        }

        .welcome-screen h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .welcome-screen .btn-submit {
            max-width: 300px;
            margin: 2rem auto;
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
            }

            .left-sidebar, .right-sidebar {
                display: none;
            }
        }

        .btn-repost {
            flex: 1;
            padding: 0.75rem;
            border: none;
            background: transparent;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: background 0.2s;
        }

        .btn-repost:hover {
            background: #f0f2f5;
        }

        .btn-repost.reposted {
            color: #22c55e;
        }

        .video-controls {
            position: relative;
        }

        .play-pause-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.6);
            border: none;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: none;
        }

        .video-controls:hover .play-pause-btn {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="logo">🎓 Campus Social</div>
        <div class="nav-center">
            <button class="nav-btn active" data-view="feed">🏠 Feed</button>
            <button class="nav-btn" data-view="friends">👥 Friends</button>
            <button class="nav-btn" data-view="videos">🎬 Videos</button>
        </div>
        <div class="nav-right">
            <div class="notification-badge" id="friendRequestBadge" style="display:none;">0</div>
            <div class="user-avatar-nav" id="userAvatarNav" onclick="showProfile()">
                <span>👤</span>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="left-sidebar" id="leftSidebar">
            <div class="profile-card">
                <div class="profile-avatar" id="profileAvatar" onclick="showProfile()">
                    <span>👤</span>
                </div>
                <div class="profile-name" id="profileName">Guest User</div>
                <div class="profile-stats">
                    <div class="stat">
                        <div class="stat-number" id="postsCount">0</div>
                        <div class="stat-label">Posts</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="friendsCount">0</div>
                        <div class="stat-label">Friends</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="likesCount">0</div>
                        <div class="stat-label">Likes</div>
                    </div>
                </div>
            </div>

            <div class="menu-card">
                <div class="menu-item" onclick="changeView('friends')">
                    <div class="menu-icon">👥</div>
                    <div>My Friends</div>
                </div>
                <div class="menu-item" onclick="changeView('videos')">
                    <div class="menu-icon">🎬</div>
                    <div>Videos</div>
                </div>
                <div class="menu-item">
                    <div class="menu-icon">📸</div>
                    <div>Photos</div>
                </div>
                <div class="menu-item">
                    <div class="menu-icon">⚙️</div>
                    <div>Settings</div>
                </div>
            </div>
        </aside>

        <!-- Center Feed -->
        <main class="center-feed" id="centerFeed">
            <div class="welcome-screen" id="welcomeScreen">
                <h2>👋 Welcome to Campus Social!</h2>
                <p style="margin-bottom: 2rem; color: #666;">Create your profile to start connecting with students, sharing posts, and making friends!</p>
                <button class="btn-submit" onclick="openProfileModal()">Create Your Profile</button>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar" id="rightSidebar">
            <div class="suggestions-card">
                <div class="card-title">Friend Requests</div>
                <div id="friendRequestsList">
                    <p style="color: #666; font-size: 0.9rem;">No pending requests</p>
                </div>
            </div>

            <div class="suggestions-card">
                <div class="card-title">Suggested Friends</div>
                <div id="suggestionsList">
                    <p style="color: #666; font-size: 0.9rem;">Create your profile to see suggestions</p>
                </div>
            </div>
        </aside>
    </div>

    <!-- Profile Modal -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <h2 class="modal-header">Create Your Profile</h2>
            <form id="profileForm">
                <div class="image-upload-area">
                    <div class="image-preview" id="imagePreview">📷</div>
                    <input type="file" id="profilePicture" accept="image/*" style="display:none;">
                    <button type="button" class="upload-btn" onclick="document.getElementById('profilePicture').click()">Upload Photo</button>
                </div>

                <div class="form-group">
                    <label>Full Name *</label>
                    <input type="text" id="fullName" required>
                </div>

                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="email" required>
                </div>

                <div class="form-group">
                    <label>Major *</label>
                    <select id="major" required>
                        <option value="">Select major</option>
                        <option>Computer Science</option>
                        <option>Engineering</option>
                        <option>Business</option>
                        <option>Medicine</option>
                        <option>Law</option>
                        <option>Arts</option>
                        <option>Psychology</option>
                        <option>Mathematics</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Year *</label>
                    <select id="year" required>
                        <option value="">Select year</option>
                        <option>Freshman</option>
                        <option>Sophomore</option>
                        <option>Junior</option>
                        <option>Senior</option>
                        <option>Graduate</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Bio</label>
                    <textarea id="bio" rows="3" placeholder="Tell us about yourself..."></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeProfileModal()">Cancel</button>
                    <button type="submit" class="btn-submit">Create Profile</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // App State
        let currentUser = null;
        let users = [];
        let posts = [];
        let friendRequests = [];
        let friends = [];
        let currentView = 'feed';
        let currentImageData = null;

        // Initialize
        function init() {
            setupEventListeners();
            checkForUser();
        }

        function setupEventListeners() {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    changeView(this.dataset.view);
                });
            });

            document.getElementById('profilePicture').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        currentImageData = event.target.result;
                        document.getElementById('imagePreview').innerHTML = `<img src="${currentImageData}" alt="Preview">`;
                    };
                    reader.readAsDataURL(file);
                }
            });

            document.getElementById('profileForm').addEventListener('submit', function(e) {
                e.preventDefault();
                createProfile();
            });
        }

        function checkForUser() {
            if (!currentUser) {
                document.getElementById('welcomeScreen').style.display = 'block';
            }
        }

        function openProfileModal() {
            document.getElementById('profileModal').classList.add('active');
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.remove('active');
        }

        function createProfile() {
            const user = {
                id: Date.now(),
                fullName: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                major: document.getElementById('major').value,
                year: document.getElementById('year').value,
                bio: document.getElementById('bio').value,
                image: currentImageData,
                posts: [],
                friends: [],
                likes: 0
            };

            currentUser = user;
            users.push(user);
            
            closeProfileModal();
            document.getElementById('profileForm').reset();
            currentImageData = null;
            document.getElementById('imagePreview').innerHTML = '📷';
            
            updateUserInterface();
            createSampleUsers();
            renderFeed();
        }

        function updateUserInterface() {
            document.getElementById('welcomeScreen').style.display = 'none';
            
            const avatar = currentUser.image 
                ? `<img src="${currentUser.image}" alt="${currentUser.fullName}">` 
                : currentUser.fullName.charAt(0).toUpperCase();
            
            document.getElementById('userAvatarNav').innerHTML = avatar;
            document.getElementById('profileAvatar').innerHTML = avatar;
            document.getElementById('profileName').textContent = currentUser.fullName;
            
            document.getElementById('centerFeed').innerHTML = `
                <div class="create-post-card">
                    <div class="post-input">
                        <textarea id="postText" placeholder="What's on your mind, ${currentUser.fullName.split(' ')[0]}?" rows="3"></textarea>
                    </div>
                    <div class="post-actions">
                        <button class="post-action-btn" onclick="document.getElementById('postImage').click()">
                            📷 Photo
                            <input type="file" id="postImage" accept="image/*" style="display:none;">
                        </button>
                        <button class="post-action-btn" onclick="document.getElementById('postVideo').click()">
                            🎬 Video
                            <input type="file" id="postVideo" accept="video/*" style="display:none;">
                        </button>
                        <button class="post-action-btn" onclick="createPost()" style="background: #667eea; color: white;">
                            Post
                        </button>
                    </div>
                </div>
                <div id="feedContainer"></div>
            `;

            document.getElementById('postImage').addEventListener('change', handleMediaUpload);
            document.getElementById('postVideo').addEventListener('change', handleMediaUpload);
            
            renderSuggestions();
            updateStats();
        }

        let pendingMedia = null;

        function handleMediaUpload(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    pendingMedia = {
                        type: file.type.startsWith('image') ? 'image' : 'video',
                        data: event.target.result
                    };
                };
                reader.readAsDataURL(file);
            }
        }

        function createPost() {
            const text = document.getElementById('postText').value.trim();
            if (!text && !pendingMedia) {
                alert('Please write something or add media!');
                return;
            }

            const post = {
                id: Date.now(),
                author: currentUser,
                content: text,
                media: pendingMedia,
                likes: 0,
                likedBy: [],
                reposts: 0,
                repostedBy: [],
                comments: [],
                timestamp: new Date()
            };

            posts.unshift(post);
            currentUser.posts.push(post.id);
            
            document.getElementById('postText').value = '';
            pendingMedia = null;
            document.getElementById('postImage').value = '';
            document.getElementById('postVideo').value = '';
            
            renderFeed();
            updateStats();
        }

        function renderFeed() {
            const feedContainer = document.getElementById('feedContainer');
            if (!feedContainer) return;

            if (posts.length === 0) {
                feedContainer.innerHTML = '<div class="post-card" style="text-align:center; color:#666;">No posts yet. Be the first to share something!</div>';
                return;
            }

            feedContainer.innerHTML = posts.map(post => {
                const isLiked = post.likedBy.includes(currentUser.id);
                const isReposted = post.repostedBy.includes(currentUser.id);
                
                return `
                    <div class="post-card">
                        <div class="post-header">
                            <div class="post-avatar">
                                ${post.author.image 
                                    ? `<img src="${post.author.image}" alt="${post.author.fullName}">` 
                                    : post.author.fullName.charAt(0).toUpperCase()}
                            </div>
                            <div class="post-info">
                                <div class="post-author">${post.author.fullName}</div>
                                <div class="post-time">${formatTime(post.timestamp)} • ${post.author.year}</div>
                            </div>
                        </div>
                        
                        ${post.content ? `<div class="post-content">${post.content}</div>` : ''}
                        
                        ${post.media ? `
                            <div class="post-media">
                                ${post.media.type === 'image' 
                                    ? `<img src="${post.media.data}" alt="Post media">` 
                                    : `
                                        <div class="video-controls">
                                            <video controls>
                                                <source src="${post.media.data}" type="video/mp4">
                                            </video>
                                            <button class="play-pause-btn" onclick="toggleVideo(this)">▶️</button>
                                        </div>
                                    `}
                            </div>
                        ` : ''}
                        
                        <div class="post-stats">
                            <div>${post.likes} likes • ${post.comments.length} comments</div>
                            <div>${post.reposts} reposts</div>
                        </div>
                        
                        <div class="post-interactions">
                            <button class="interaction-btn ${isLiked ? 'liked' : ''}" onclick="toggleLike(${post.id})">
                                ${isLiked ? '❤️' : '🤍'} Like
                            </button>
                            <button class="interaction-btn" onclick="toggleComments(${post.id})">
                                💬 Comment
                            </button>
                            <button class="btn-repost ${isReposted ? 'reposted' : ''}" onclick="toggleRepost(${post.id})">
                                ${isReposted ? '🔄' : '↗️'} Repost
                            </button>
                        </div>
                        
                        <div class="comments-section" id="comments-${post.id}" style="display:none;">
                            ${post.comments.map(comment => `
                                <div class="comment">
                                    <div class="comment-avatar">
                                        ${comment.author.image 
                                            ? `<img src="${comment.author.image}" alt="${comment.author.fullName}">` 
                                            : comment.author.fullName.charAt(0).toUpperCase()}
                                    </div>
                                    <div class="comment-content">
                                        <div class="comment-author">${comment.author.fullName}</div>
                                        <div class="comment-text">${comment.text}</div>
                                    </div>
                                </div>
                            `).join('')}
                            
                            <div class="comment-input">
                                <div class="comment-avatar">
                                    ${currentUser.image 
                                        ? `<img src="${currentUser.image}" alt="${currentUser.fullName}">` 
                                        : currentUser.fullName.charAt(0).toUpperCase()}
                                </div>
                                <input type="text" placeholder="Write a comment..." id="comment-input-${post.id}" onkeypress="if(event.key==='Enter') addComment(${post.id})">
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function toggleLike(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;

            const index = post.likedBy.indexOf(currentUser.id);
            if (index > -1) {
                post.likedBy.splice(index, 1);
                post.likes--;
            } else {
                post.likedBy.push(currentUser.id);
                post.likes++;
            }
            
            renderFeed();
            updateStats();
        }

        function toggleRepost(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;

            const index = post.repostedBy.indexOf(currentUser.id);
            if (index > -1) {
                post.repostedBy.splice(index, 1);
                post.reposts--;
            } else {
                post.repostedBy.push(currentUser.id);
                post.reposts++;
                
                const repost = {
                    id: Date.now(),
                    author: currentUser,
                    content: `Reposted from ${post.author.fullName}`,
                    originalPost: post,
                    media: post.media,
                    likes: 0,
                    likedBy: [],
                    reposts: 0,
                    repostedBy: [],
                    comments: [],
                    timestamp: new Date()
                };
                posts.unshift(repost);
            }
            
            renderFeed();
        }

        function toggleComments(postId) {
            const commentsSection = document.getElementById(`comments-${postId}`);
            commentsSection.style.display = commentsSection.style.display === 'none' ? 'block' : 'none';
        }

        function addComment(postId) {
            const input = document.getElementById(`comment-input-${postId}`);
            const text = input.value.trim();
            if (!text) return;

            const post = posts.find(p => p.id === postId);
            if (!post) return;

            post.comments.push({
                id: Date.now(),
                author: currentUser,
                text: text,
                timestamp: new Date()
            });

            input.value = '';
            renderFeed();
            toggleComments(postId);
        }

        function createSampleUsers() {
            const sampleUsers = [
                { name: 'Emma Wilson', major: 'Computer Science', year: 'Junior', emoji: '👩‍💻' },
                { name: 'Marcus Johnson', major: 'Engineering', year: 'Senior', emoji: '👨‍🔧' },
                { name: 'Sophia Chen', major: 'Business', year: 'Sophomore', emoji: '👩‍💼' },
                { name: 'Liam Brown', major: 'Medicine', year: 'Graduate', emoji: '👨‍⚕️' },
                { name: 'Olivia Davis', major: 'Arts', year: 'Freshman', emoji: '🎨' }
            ];

            sampleUsers.forEach(user => {
                users.push({
                    id: Date.now() + Math.random(),
                    fullName: user.name,
                    email: user.name.toLowerCase().replace(' ', '.') + '@university.edu',
                    major: user.major,
                    year: user.year,
                    emoji: user.emoji,
                    posts: [],
                    friends: [],
                    likes: 0
                });
            });

            renderSuggestions();
        }

        function renderSuggestions() {
            const container = document.getElementById('suggestionsList');
            const otherUsers = users.filter(u => u.id !== currentUser.id && !friends.some(f => f.id === u.id));

            if (otherUsers.length === 0) {
                container.innerHTML = '<p style="color: #666; font-size: 0.9rem;">No suggestions available</p>';
                return;
            }

            container.innerHTML = otherUsers.slice(0, 5).map(user => `
                <div class="suggestion-item">
                    <div class="suggestion-avatar">
                        ${user.image 
                            ? `<img src="${user.image}" alt="${user.fullName}">` 
                            : (user.emoji || user.fullName.charAt(0).toUpperCase())}
                    </div>
                    <div class="suggestion-info">
                        <div class="suggestion-name">${user.fullName}</div>
                        <div class="suggestion-major">${user.major}</div>
                    </div>
                    <button class="add-friend-btn" onclick="sendFriendRequest(${user.id})">+ Add</button>
                </div>
            `).join('');
        }

        function sendFriendRequest(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;

            friendRequests.push({
                id: Date.now(),
                from: currentUser,
                to: user,
                timestamp: new Date()
            });

            alert(`Friend request sent to ${user.fullName}! 🎉`);
            updateFriendRequestBadge();
            
            setTimeout(() => {
                acceptFriendRequest(friendRequests[friendRequests.length - 1].id);
            }, 2000);
        }

        function acceptFriendRequest(requestId) {
            const request = friendRequests.find(r => r.id === requestId);
            if (!request) return;

            friends.push(request.to);
            friendRequests = friendRequests.filter(r => r.id !== requestId);

            renderSuggestions();
            updateStats();
            updateFriendRequestBadge();
        }

        function updateFriendRequestBadge() {
            const badge = document.getElementById('friendRequestBadge');
            if (friendRequests.length > 0) {
                badge.textContent = friendRequests.length;
                badge.style.display = 'block';
            } else {
                badge.style.display = 'none';
            }
        }

        function updateStats() {
            document.getElementById('postsCount').textContent = currentUser.posts.length;
            document.getElementById('friendsCount').textContent = friends.length;
            
            let totalLikes = 0;
            posts.forEach(post => {
                if (post.author.id === currentUser.id) {
                    totalLikes += post.likes;
                }
            });
            document.getElementById('likesCount').textContent = totalLikes;
        }

        function formatTime(timestamp) {
            const now = new Date();
            const diff = Math.floor((now - timestamp) / 1000);
            
            if (diff < 60) return 'Just now';
            if (diff < 3600) return `${Math.floor(diff / 60)}m ago`;
            if (diff < 86400) return `${Math.floor(diff / 3600)}h ago`;
            return `${Math.floor(diff / 86400)}d ago`;
        }

        function changeView(view) {
            currentView = view;
            // Implement view changes here
        }

        function showProfile() {
            if (currentUser) {
                alert(`Profile: ${currentUser.fullName}\n${currentUser.major} - ${currentUser.year}\n${currentUser.bio || 'No bio yet'}`);
            }
        }

        function toggleVideo(btn) {
            const video = btn.parentElement.querySelector('video');
            if (video.paused) {
                video.play();
                btn.textContent = '⏸️';
            } else {
                video.pause();
                btn.textContent = '▶️';
            }
        }

        // Initialize app
        init();
    </script>
</body>
</html>
